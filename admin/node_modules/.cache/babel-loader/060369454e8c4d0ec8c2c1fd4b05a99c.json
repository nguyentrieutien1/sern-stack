{"ast":null,"code":"var _jsxFileName = \"D:\\\\LearnFullstack\\\\admin\\\\src\\\\component\\\\QuanLySanPham\\\\QuanLySanPham.js\";\nimport React, { Component } from \"react\";\nimport CancelPresentationOutlinedIcon from \"@mui/icons-material/CancelPresentationOutlined\";\nimport Pagination from \"react-js-pagination\";\nimport { TextField, Button } from \"@mui/material\";\nimport { withAlert } from \"react-alert\";\nimport \"./QuanLySanPham.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class QuanLySanPham extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handlePageChange = numberPage => {\n      this.setState({\n        activePage: numberPage\n      });\n      let token = JSON.parse(localStorage.getItem(\"token\"));\n      this.props.handlePageChange(numberPage, token);\n    };\n\n    this.deleteProduct = id => {\n      this.props.deleteProduct(id);\n      console.log();\n      let numberPage = this.state.activePage;\n      setTimeout(() => {\n        this.props.handlePageChange(numberPage);\n      }, 500);\n    };\n\n    this.updateProduct = product => {\n      let {\n        id,\n        title,\n        price,\n        description,\n        image\n      } = product;\n      this.setState({\n        id,\n        title,\n        price,\n        description,\n        image\n      });\n      console.log(this.state);\n    };\n\n    this.renderProducts = () => {\n      return this.props.allProducts.map(product => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: product.image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: product.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"$\", product.price, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: product.description.slice(0, 100)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"button-gr\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => this.deleteProduct(product.id),\n              type: \"button\",\n              class: \"btn-delete\",\n              children: \"DELETE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => this.updateProduct(product),\n              type: \"button\",\n              class: \"btn-update\",\n              children: \"EDIT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }, this);\n      });\n    };\n\n    this.handleGetImg = e => {\n      let data = new FormData();\n      data.append(\"file\", e.target.files[0]);\n      data.append(\"upload_preset\", \"nguyenthanhtung\");\n      fetch(`https://api.cloudinary.com/v1_1/artimate/image/upload`, {\n        method: \"POST\",\n        body: data\n      }).then(res => res.json()).then(data => this.setState({\n        image: data.secure_url\n      })).catch(e => console.log(e));\n    };\n\n    this.handleGetValue = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleUpdateProducts = e => {\n      const alert = this.props.alert;\n      e.preventDefault();\n      let {\n        id,\n        title,\n        description,\n        price,\n        image\n      } = this.state;\n      console.log(id, title, price, description, image);\n\n      if (!id) {\n        this.props.handleUpdateProducts({\n          title,\n          description,\n          price,\n          image\n        });\n        return;\n      }\n\n      this.props.updateProduct({\n        id,\n        title,\n        description,\n        price,\n        image\n      });\n      let numberPage = this.state.activePage;\n      setTimeout(() => {\n        let {\n          statusCode,\n          message\n        } = this.props.messAll;\n\n        if (statusCode === 200) {\n          alert.success(message);\n          this.setState({\n            id: \"\",\n            title: \"\",\n            price: \"\",\n            description: \"\",\n            image: \"\"\n          });\n          this.props.handlePageChange(numberPage);\n          return;\n        }\n      }, 500);\n      alert.error(message);\n    };\n\n    this.state = {\n      id: \"\",\n      title: \"\",\n      price: \"\",\n      description: \"\",\n      image: \"\",\n      activePage: 1\n    };\n  }\n\n  componentDidMount() {\n    let pagination = document.querySelector(\".pagination\");\n    window.addEventListener(\"scroll\", () => {\n      if (window.pageYOffset > 100) {\n        pagination.classList.add(\"activePag\");\n      } else {}\n    });\n  }\n\n  render() {\n    console.log(this.props.messAll);\n    let {\n      title,\n      price,\n      description,\n      image\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-product\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-controll\",\n            children: \"FORM COTROLL PRODUCTS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CancelPresentationOutlinedIcon, {\n            onClick: this.handleCloseForm,\n            className: \"close-button\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            className: \"input\",\n            id: \"standard-basic\",\n            size: \"small\",\n            type: \"file\",\n            name: \"image\",\n            onChange: this.handleGetImg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            className: \"input\",\n            id: \"outlined-basic\",\n            label: \"Title\",\n            variant: \"standard\",\n            size: \"small\",\n            name: \"title\",\n            onChange: this.handleGetValue,\n            value: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            className: \"input\",\n            id: \"standard-basic\",\n            label: \"Price ($)\",\n            variant: \"standard\",\n            size: \"small\",\n            name: \"price\",\n            onChange: this.handleGetValue,\n            value: price\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            className: \"input\",\n            id: \"filled-basic\",\n            label: \"Description\",\n            variant: \"standard\",\n            size: \"small\",\n            name: \"description\",\n            \"aria-controls\": true,\n            onChange: this.handleGetValue,\n            value: description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: this.handleUpdateProducts,\n            className: \"edit\",\n            variant: \"contained\",\n            color: \"success\",\n            className: \"success-btn\",\n            children: this.state.id ? `UPDATE PRODUCT` : `ADD PRODUCT`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"products\",\n          children: this.renderProducts()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pagination\",\n          children: /*#__PURE__*/_jsxDEV(Pagination, {\n            activePage: this.state.activePage,\n            itemsCountPerPage: 30,\n            totalItemsCount: 450,\n            onChange: this.handlePageChange.bind(this),\n            pageRangeDisplayed: 5\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n}","map":{"version":3,"sources":["D:/LearnFullstack/admin/src/component/QuanLySanPham/QuanLySanPham.js"],"names":["React","Component","CancelPresentationOutlinedIcon","Pagination","TextField","Button","withAlert","QuanLySanPham","constructor","props","handlePageChange","numberPage","setState","activePage","token","JSON","parse","localStorage","getItem","deleteProduct","id","console","log","state","setTimeout","updateProduct","product","title","price","description","image","renderProducts","allProducts","map","slice","handleGetImg","e","data","FormData","append","target","files","fetch","method","body","then","res","json","secure_url","catch","handleGetValue","name","value","handleUpdateProducts","alert","preventDefault","statusCode","message","messAll","success","error","componentDidMount","pagination","document","querySelector","window","addEventListener","pageYOffset","classList","add","render","handleCloseForm","bind"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,8BAAP,MAA2C,gDAA3C;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,SAASC,SAAT,EAAoBC,MAApB,QAAkC,eAAlC;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAO,qBAAP;;;AACA,eAAe,MAAMC,aAAN,SAA4BN,SAA5B,CAAsC;AACnDO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAoBnBC,gBApBmB,GAoBCC,UAAD,IAAgB;AACjC,WAAKC,QAAL,CAAc;AACZC,QAAAA,UAAU,EAAEF;AADA,OAAd;AAGA,UAAIG,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAZ;AACA,WAAKT,KAAL,CAAWC,gBAAX,CAA4BC,UAA5B,EAAwCG,KAAxC;AACD,KA1BkB;;AAAA,SA2BnBK,aA3BmB,GA2BFC,EAAD,IAAQ;AACtB,WAAKX,KAAL,CAAWU,aAAX,CAAyBC,EAAzB;AACAC,MAAAA,OAAO,CAACC,GAAR;AACA,UAAIX,UAAU,GAAG,KAAKY,KAAL,CAAWV,UAA5B;AACAW,MAAAA,UAAU,CAAC,MAAM;AACf,aAAKf,KAAL,CAAWC,gBAAX,CAA4BC,UAA5B;AACD,OAFS,EAEP,GAFO,CAAV;AAGD,KAlCkB;;AAAA,SAmCnBc,aAnCmB,GAmCFC,OAAD,IAAa;AAC3B,UAAI;AAAEN,QAAAA,EAAF;AAAMO,QAAAA,KAAN;AAAaC,QAAAA,KAAb;AAAoBC,QAAAA,WAApB;AAAiCC,QAAAA;AAAjC,UAA2CJ,OAA/C;AACA,WAAKd,QAAL,CAAc;AAAEQ,QAAAA,EAAF;AAAMO,QAAAA,KAAN;AAAaC,QAAAA,KAAb;AAAoBC,QAAAA,WAApB;AAAiCC,QAAAA;AAAjC,OAAd;AACAT,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAjB;AACD,KAvCkB;;AAAA,SAwCnBQ,cAxCmB,GAwCF,MAAM;AACrB,aAAO,KAAKtB,KAAL,CAAWuB,WAAX,CAAuBC,GAAvB,CAA4BP,OAAD,IAAa;AAC7C,4BACE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,kCACE;AAAK,YAAA,GAAG,EAAEA,OAAO,CAACI;AAAlB;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA,sBAAKJ,OAAO,CAACC;AAAb;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE;AAAA,4BAAMD,OAAO,CAACE,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,eAIE;AAAA,sBAAOF,OAAO,CAACG,WAAR,CAAoBK,KAApB,CAA0B,CAA1B,EAA6B,GAA7B;AAAP;AAAA;AAAA;AAAA;AAAA,kBAJF,eAKE;AAAK,YAAA,SAAS,EAAC,WAAf;AAAA,oCACE;AACE,cAAA,OAAO,EAAE,MAAM,KAAKf,aAAL,CAAmBO,OAAO,CAACN,EAA3B,CADjB;AAEE,cAAA,IAAI,EAAC,QAFP;AAGE,cAAA,KAAK,EAAC,YAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAQE;AACE,cAAA,OAAO,EAAE,MAAM,KAAKK,aAAL,CAAmBC,OAAnB,CADjB;AAEE,cAAA,IAAI,EAAC,QAFP;AAGE,cAAA,KAAK,EAAC,YAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARF;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF;AAwBD,OAzBM,CAAP;AA0BD,KAnEkB;;AAAA,SAoEnBS,YApEmB,GAoEHC,CAAD,IAAO;AACpB,UAAIC,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACAD,MAAAA,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAoBH,CAAC,CAACI,MAAF,CAASC,KAAT,CAAe,CAAf,CAApB;AACAJ,MAAAA,IAAI,CAACE,MAAL,CAAY,eAAZ,EAA6B,iBAA7B;AACAG,MAAAA,KAAK,CAAE,uDAAF,EAA0D;AAC7DC,QAAAA,MAAM,EAAE,MADqD;AAE7DC,QAAAA,IAAI,EAAEP;AAFuD,OAA1D,CAAL,CAIGQ,IAJH,CAISC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAJjB,EAKGF,IALH,CAKSR,IAAD,IACJ,KAAKzB,QAAL,CAAc;AACZkB,QAAAA,KAAK,EAAEO,IAAI,CAACW;AADA,OAAd,CANJ,EAUGC,KAVH,CAUUb,CAAD,IAAOf,OAAO,CAACC,GAAR,CAAYc,CAAZ,CAVhB;AAWD,KAnFkB;;AAAA,SAoFnBc,cApFmB,GAoFDd,CAAD,IAAO;AACtB,WAAKxB,QAAL,CAAc;AACZ,SAACwB,CAAC,CAACI,MAAF,CAASW,IAAV,GAAiBf,CAAC,CAACI,MAAF,CAASY;AADd,OAAd;AAGD,KAxFkB;;AAAA,SAyFnBC,oBAzFmB,GAyFKjB,CAAD,IAAO;AAC5B,YAAMkB,KAAK,GAAG,KAAK7C,KAAL,CAAW6C,KAAzB;AACAlB,MAAAA,CAAC,CAACmB,cAAF;AACA,UAAI;AAAEnC,QAAAA,EAAF;AAAMO,QAAAA,KAAN;AAAaE,QAAAA,WAAb;AAA0BD,QAAAA,KAA1B;AAAiCE,QAAAA;AAAjC,UAA2C,KAAKP,KAApD;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAYF,EAAZ,EAAgBO,KAAhB,EAAuBC,KAAvB,EAA8BC,WAA9B,EAA2CC,KAA3C;;AACA,UAAI,CAACV,EAAL,EAAS;AACP,aAAKX,KAAL,CAAW4C,oBAAX,CAAgC;AAAE1B,UAAAA,KAAF;AAASE,UAAAA,WAAT;AAAsBD,UAAAA,KAAtB;AAA6BE,UAAAA;AAA7B,SAAhC;AACA;AACD;;AACD,WAAKrB,KAAL,CAAWgB,aAAX,CAAyB;AAAEL,QAAAA,EAAF;AAAMO,QAAAA,KAAN;AAAaE,QAAAA,WAAb;AAA0BD,QAAAA,KAA1B;AAAiCE,QAAAA;AAAjC,OAAzB;AACA,UAAInB,UAAU,GAAG,KAAKY,KAAL,CAAWV,UAA5B;AACAW,MAAAA,UAAU,CAAC,MAAM;AACf,YAAI;AAAEgC,UAAAA,UAAF;AAAcC,UAAAA;AAAd,YAA0B,KAAKhD,KAAL,CAAWiD,OAAzC;;AACA,YAAIF,UAAU,KAAK,GAAnB,EAAwB;AACtBF,UAAAA,KAAK,CAACK,OAAN,CAAcF,OAAd;AACA,eAAK7C,QAAL,CAAc;AACZQ,YAAAA,EAAE,EAAE,EADQ;AAEZO,YAAAA,KAAK,EAAE,EAFK;AAGZC,YAAAA,KAAK,EAAE,EAHK;AAIZC,YAAAA,WAAW,EAAE,EAJD;AAKZC,YAAAA,KAAK,EAAE;AALK,WAAd;AAOA,eAAKrB,KAAL,CAAWC,gBAAX,CAA4BC,UAA5B;AAA0C;AAC3C;AAGF,OAfS,EAeP,GAfO,CAAV;AAgBA2C,MAAAA,KAAK,CAACM,KAAN,CAAYH,OAAZ;AACD,KArHkB;;AAEjB,SAAKlC,KAAL,GAAa;AACXH,MAAAA,EAAE,EAAE,EADO;AAEXO,MAAAA,KAAK,EAAE,EAFI;AAGXC,MAAAA,KAAK,EAAE,EAHI;AAIXC,MAAAA,WAAW,EAAE,EAJF;AAKXC,MAAAA,KAAK,EAAE,EALI;AAMXjB,MAAAA,UAAU,EAAE;AAND,KAAb;AAQD;;AACDgD,EAAAA,iBAAiB,GAAG;AAClB,QAAIC,UAAU,GAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAjB;AACAC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,MAAM;AACtC,UAAID,MAAM,CAACE,WAAP,GAAqB,GAAzB,EAA8B;AAC5BL,QAAAA,UAAU,CAACM,SAAX,CAAqBC,GAArB,CAAyB,WAAzB;AACD,OAFD,MAEO,CACN;AACF,KALD;AAMD;;AAmGDC,EAAAA,MAAM,GAAG;AACPjD,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKb,KAAL,CAAWiD,OAAvB;AAEA,QAAI;AAAE/B,MAAAA,KAAF;AAASC,MAAAA,KAAT;AAAgBC,MAAAA,WAAhB;AAA6BC,MAAAA;AAA7B,QAAuC,KAAKP,KAAhD;AACA,wBACE;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,kCACE;AAAM,YAAA,SAAS,EAAC,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,8BAAD;AACE,YAAA,OAAO,EAAE,KAAKgD,eADhB;AAEE,YAAA,SAAS,EAAC;AAFZ;AAAA;AAAA;AAAA;AAAA,kBAFF,eAME,QAAC,SAAD;AACE,YAAA,SAAS,EAAC,OADZ;AAEE,YAAA,EAAE,EAAC,gBAFL;AAGE,YAAA,IAAI,EAAC,OAHP;AAIE,YAAA,IAAI,EAAC,MAJP;AAKE,YAAA,IAAI,EAAC,OALP;AAME,YAAA,QAAQ,EAAE,KAAKpC;AANjB;AAAA;AAAA;AAAA;AAAA,kBANF,eAcE,QAAC,SAAD;AACE,YAAA,SAAS,EAAC,OADZ;AAEE,YAAA,EAAE,EAAC,gBAFL;AAGE,YAAA,KAAK,EAAC,OAHR;AAIE,YAAA,OAAO,EAAC,UAJV;AAKE,YAAA,IAAI,EAAC,OALP;AAME,YAAA,IAAI,EAAC,OANP;AAOE,YAAA,QAAQ,EAAE,KAAKe,cAPjB;AAQE,YAAA,KAAK,EAAEvB;AART;AAAA;AAAA;AAAA;AAAA,kBAdF,eAyBE,QAAC,SAAD;AACE,YAAA,SAAS,EAAC,OADZ;AAEE,YAAA,EAAE,EAAC,gBAFL;AAGE,YAAA,KAAK,EAAC,WAHR;AAIE,YAAA,OAAO,EAAC,UAJV;AAKE,YAAA,IAAI,EAAC,OALP;AAME,YAAA,IAAI,EAAC,OANP;AAOE,YAAA,QAAQ,EAAE,KAAKuB,cAPjB;AAQE,YAAA,KAAK,EAAEtB;AART;AAAA;AAAA;AAAA;AAAA,kBAzBF,eAmCE,QAAC,SAAD;AACE,YAAA,SAAS,EAAC,OADZ;AAEE,YAAA,EAAE,EAAC,cAFL;AAGE,YAAA,KAAK,EAAC,aAHR;AAIE,YAAA,OAAO,EAAC,UAJV;AAKE,YAAA,IAAI,EAAC,OALP;AAME,YAAA,IAAI,EAAC,aANP;AAOE,iCAPF;AAQE,YAAA,QAAQ,EAAE,KAAKsB,cARjB;AASE,YAAA,KAAK,EAAErB;AATT;AAAA;AAAA;AAAA;AAAA,kBAnCF,eA8CE,QAAC,MAAD;AACE,YAAA,OAAO,EAAE,KAAKwB,oBADhB;AAEE,YAAA,SAAS,EAAC,MAFZ;AAGE,YAAA,OAAO,EAAC,WAHV;AAIE,YAAA,KAAK,EAAC,SAJR;AAKE,YAAA,SAAS,EAAC,aALZ;AAAA,sBAOG,KAAK9B,KAAL,CAAWH,EAAX,GAAiB,gBAAjB,GAAoC;AAPvC;AAAA;AAAA;AAAA;AAAA,kBA9CF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAyDE;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,oBAA2B,KAAKW,cAAL;AAA3B;AAAA;AAAA;AAAA;AAAA,gBAzDF,eA0DE;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA,iCACE,QAAC,UAAD;AACE,YAAA,UAAU,EAAE,KAAKR,KAAL,CAAWV,UADzB;AAEE,YAAA,iBAAiB,EAAE,EAFrB;AAGE,YAAA,eAAe,EAAE,GAHnB;AAIE,YAAA,QAAQ,EAAE,KAAKH,gBAAL,CAAsB8D,IAAtB,CAA2B,IAA3B,CAJZ;AAKE,YAAA,kBAAkB,EAAE;AALtB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBA1DF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,qBADF;AAwED;;AAnMkD","sourcesContent":["import React, { Component } from \"react\";\r\nimport CancelPresentationOutlinedIcon from \"@mui/icons-material/CancelPresentationOutlined\";\r\nimport Pagination from \"react-js-pagination\";\r\nimport { TextField, Button } from \"@mui/material\";\r\nimport { withAlert } from \"react-alert\";\r\nimport \"./QuanLySanPham.css\";\r\nexport default class QuanLySanPham extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: \"\",\r\n      title: \"\",\r\n      price: \"\",\r\n      description: \"\",\r\n      image: \"\",\r\n      activePage: 1,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    let pagination = document.querySelector(\".pagination\");\r\n    window.addEventListener(\"scroll\", () => {\r\n      if (window.pageYOffset > 100) {\r\n        pagination.classList.add(\"activePag\");\r\n      } else {\r\n      }\r\n    });\r\n  }\r\n  handlePageChange = (numberPage) => {\r\n    this.setState({\r\n      activePage: numberPage,\r\n    });\r\n    let token = JSON.parse(localStorage.getItem(\"token\"));\r\n    this.props.handlePageChange(numberPage, token);\r\n  };\r\n  deleteProduct = (id) => {\r\n    this.props.deleteProduct(id);\r\n    console.log();\r\n    let numberPage = this.state.activePage;\r\n    setTimeout(() => {\r\n      this.props.handlePageChange(numberPage);\r\n    }, 500);\r\n  };\r\n  updateProduct = (product) => {\r\n    let { id, title, price, description, image } = product;\r\n    this.setState({ id, title, price, description, image });\r\n    console.log(this.state);\r\n  };\r\n  renderProducts = () => {\r\n    return this.props.allProducts.map((product) => {\r\n      return (\r\n        <div className=\"card\">\r\n          <img src={product.image} />\r\n          <h3>{product.title}</h3>\r\n          <h2>${product.price} </h2>\r\n          <span>{product.description.slice(0, 100)}</span>\r\n          <div className=\"button-gr\">\r\n            <button\r\n              onClick={() => this.deleteProduct(product.id)}\r\n              type=\"button\"\r\n              class=\"btn-delete\"\r\n            >\r\n              DELETE\r\n            </button>\r\n            <button\r\n              onClick={() => this.updateProduct(product)}\r\n              type=\"button\"\r\n              class=\"btn-update\"\r\n            >\r\n              EDIT\r\n            </button>\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n  handleGetImg = (e) => {\r\n    let data = new FormData();\r\n    data.append(\"file\", e.target.files[0]);\r\n    data.append(\"upload_preset\", \"nguyenthanhtung\");\r\n    fetch(`https://api.cloudinary.com/v1_1/artimate/image/upload`, {\r\n      method: \"POST\",\r\n      body: data,\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) =>\r\n        this.setState({\r\n          image: data.secure_url,\r\n        })\r\n      )\r\n      .catch((e) => console.log(e));\r\n  };\r\n  handleGetValue = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  handleUpdateProducts = (e) => {\r\n    const alert = this.props.alert;\r\n    e.preventDefault();\r\n    let { id, title, description, price, image } = this.state;\r\n    console.log(id, title, price, description, image);\r\n    if (!id) {\r\n      this.props.handleUpdateProducts({ title, description, price, image });\r\n      return;\r\n    }\r\n    this.props.updateProduct({ id, title, description, price, image });\r\n    let numberPage = this.state.activePage;\r\n    setTimeout(() => {\r\n      let { statusCode, message } = this.props.messAll;\r\n      if (statusCode === 200) {\r\n        alert.success(message);\r\n        this.setState({\r\n          id: \"\",\r\n          title: \"\",\r\n          price: \"\",\r\n          description: \"\",\r\n          image: \"\",\r\n        });\r\n        this.props.handlePageChange(numberPage);  return;\r\n      }\r\n\r\n    \r\n    }, 500);\r\n    alert.error(message);\r\n  };\r\n  render() {\r\n    console.log(this.props.messAll);\r\n\r\n    let { title, price, description, image } = this.state;\r\n    return (\r\n      <>\r\n        <div className=\"container\">\r\n          <div className=\"form-product\">\r\n            <span className=\"text-controll\">FORM COTROLL PRODUCTS</span>\r\n            <CancelPresentationOutlinedIcon\r\n              onClick={this.handleCloseForm}\r\n              className=\"close-button\"\r\n            ></CancelPresentationOutlinedIcon>\r\n            <TextField\r\n              className=\"input\"\r\n              id=\"standard-basic\"\r\n              size=\"small\"\r\n              type=\"file\"\r\n              name=\"image\"\r\n              onChange={this.handleGetImg}\r\n            />\r\n            <TextField\r\n              className=\"input\"\r\n              id=\"outlined-basic\"\r\n              label=\"Title\"\r\n              variant=\"standard\"\r\n              size=\"small\"\r\n              name=\"title\"\r\n              onChange={this.handleGetValue}\r\n              value={title}\r\n            />\r\n\r\n            <TextField\r\n              className=\"input\"\r\n              id=\"standard-basic\"\r\n              label=\"Price ($)\"\r\n              variant=\"standard\"\r\n              size=\"small\"\r\n              name=\"price\"\r\n              onChange={this.handleGetValue}\r\n              value={price}\r\n            />\r\n            <TextField\r\n              className=\"input\"\r\n              id=\"filled-basic\"\r\n              label=\"Description\"\r\n              variant=\"standard\"\r\n              size=\"small\"\r\n              name=\"description\"\r\n              aria-controls\r\n              onChange={this.handleGetValue}\r\n              value={description}\r\n            />\r\n            <Button\r\n              onClick={this.handleUpdateProducts}\r\n              className=\"edit\"\r\n              variant=\"contained\"\r\n              color=\"success\"\r\n              className=\"success-btn\"\r\n            >\r\n              {this.state.id ? `UPDATE PRODUCT` : `ADD PRODUCT`}\r\n            </Button>\r\n          </div>\r\n          <div className=\"products\">{this.renderProducts()}</div>\r\n          <div className=\"pagination\">\r\n            <Pagination\r\n              activePage={this.state.activePage}\r\n              itemsCountPerPage={30}\r\n              totalItemsCount={450}\r\n              onChange={this.handlePageChange.bind(this)}\r\n              pageRangeDisplayed={5}\r\n            />\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}